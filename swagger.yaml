---
swagger: "2.0"
info:
  version: "2019-03-11T10:24:40Z"
  title: "prod-data-exporter"
host: "3bck00l1ng.execute-api.eu-west-1.amazonaws.com"
basePath: "/prod"
schemes:
- "https"
paths:
  /{key}:
    get:
      summary: "Creates a signed url for the s3 object"
      description: "Requires s3 bucket + key"
      produces:
      - "application/json"
      parameters:
      - name: "key"
        in: "path"
        description: "s3 key to export"
        required: true
        type: "string"
      responses:
        200:
          description: "200 response"
          schema:
            $ref: "#/definitions/exportResponse"
        400:
          description: "400 response"
          schema:
            $ref: "#/definitions/awsError"
      security:
      - authenticate: []
    options:
      consumes:
      - "application/json"
      produces:
      - "application/json"
      responses:
        200:
          description: "200 response"
          headers:
            Access-Control-Allow-Origin:
              type: "string"
            Access-Control-Allow-Methods:
              type: "string"
            Access-Control-Allow-Credentials:
              type: "string"
            Access-Control-Allow-Headers:
              type: "string"
securityDefinitions:
  authenticate:
    type: "apiKey"
    name: "Authorization"
    in: "header"
    x-amazon-apigateway-authtype: "custom"
definitions:
  exportResponse:
    type: "array"
    description: "A response containing a signed url"
    items:
      type: "object"
      properties:
        key:
          type: "string"
        url:
          type: "string"
      required:
      - "key"
      - "url"
  awsError:
    type: "object"
    required:
    - "statusCode"
    properties:
      statusCode:
        type: "number"
    description: "An error response"
